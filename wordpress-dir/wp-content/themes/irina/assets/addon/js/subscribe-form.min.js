!function(e,a){"use strict";var n={noticeCreate:function(a,n,s){var t,o,i,r=0;if(!n||"true"===(s||!1))return!1;t=e('<div class="novaworks-handler-notice '+a+'"><span class="dashicons"></span><div class="inner">'+n+"</div></div>"),e("body").prepend(t),i=100,e(".novaworks-handler-notice").each((function(){e(this).css({top:i}),i+=e(this).outerHeight(!0)})),r=-1*(t.outerWidth(!0)+10),t.css({right:r}),o=setTimeout((function(){t.css({right:10}).addClass("show-state")}),100),o=setTimeout((function(){r=-1*(t.outerWidth(!0)+10),t.css({right:r}).removeClass("show-state")}),4e3),o=setTimeout((function(){t.remove(),clearTimeout(o)}),4500)},serializeObject:function(a){var n=this,s={},t={},o={validate:/^[a-zA-Z][a-zA-Z0-9_-]*(?:\[(?:\d*|[a-zA-Z0-9_-]+)\])*$/,key:/[a-zA-Z0-9_-]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_-]+$/};return this.build=function(e,a,n){return e[a]=n,e},this.push_counter=function(e){return void 0===t[e]&&(t[e]=0),t[e]++},e.each(a.serializeArray(),(function(){var a,t,i,r;if(o.validate.test(this.name)){for(t=this.name.match(o.key),i=this.value,r=this.name;void 0!==(a=t.pop());)r=r.replace(new RegExp("\\["+a+"\\]$"),""),a.match(o.push)?i=n.build([],n.push_counter(r),i):a.match(o.fixed)?i=n.build([],a,i):a.match(o.named)&&(i=n.build({},a,i));s=e.extend(!0,s,i)}})),s}},s=function(a){var s=this,t={handlerId:"",cache:!1,processData:!0,url:"",async:!1,beforeSendCallback:function(){},errorCallback:function(){},successCallback:function(){},completeCallback:function(){}};if(a&&e.extend(t,a),!window[t.handlerId])return window.console&&window.console.warn("Handler id not found"),!1;s.handlerSettings=window[t.handlerId]||{},s.ajaxRequest=null,s.ajaxProcessing=!1,s.data={action:s.handlerSettings.action,nonce:s.handlerSettings.nonce},""===t.url&&(s.handlerSettings.is_public,t.url=window.NovaworksElementConfigs.ajaxurl),s.send=function(){s.ajaxProcessing&&n.noticeCreate("error-notice",s.handlerSettings.sys_messages.wait_processing,s.handlerSettings.is_public),s.ajaxProcessing=!0,s.ajaxRequest=jQuery.ajax({type:s.handlerSettings.type,url:t.url,data:s.data,cache:t.cache,dataType:s.handlerSettings.data_type,processData:t.processData,beforeSend:function(e,a){null===s.ajaxRequest||t.async||s.ajaxRequest.abort(),t.beforeSendCallback&&"function"==typeof t.beforeSendCallback&&t.beforeSendCallback(e,a)},error:function(a,n,s){e(document).trigger({type:"novaworks-ajax-handler-error",jqXHR:a,textStatus:n,errorThrown:s}),t.errorCallback&&"function"==typeof t.errorCallback&&t.errorCallback(a,n,s)},success:function(a,o,i){s.ajaxProcessing=!1,e(document).trigger({type:"novaworks-ajax-handler-success",response:a,jqXHR:i,textStatus:o}),t.successCallback&&"function"==typeof t.successCallback&&t.successCallback(a,o,i),n.noticeCreate(a.type,a.message,s.handlerSettings.is_public)},complete:function(a,n){e(document).trigger({type:"novaworks-ajax-handler-complete",jqXHR:a,textStatus:n}),t.completeCallback&&"function"==typeof t.completeCallback&&t.completeCallback(a,n)}})},s.sendData=function(e){var a=e||{};s.data={action:s.handlerSettings.action,nonce:s.handlerSettings.nonce,data:a},s.send()},s.sendFormData=function(a){var t,o=e(a);t=n.serializeObject(o),s.sendData(t)}};e(window).on("elementor/frontend/init",(function(){a.hooks.addAction("frontend/element_ready/novaworks-subscribe-form.default",(function(a){var n=a.find(".novaworks-subscribe-form"),t=a.data("id"),o=n.data("settings"),i=e(".novaworks-subscribe-form__form",n),r=(e(".novaworks-subscribe-form__fields",n),e(".novaworks-subscribe-form__mail-field",n)),c=r.data("instance-data"),l=e(".novaworks-subscribe-form__submit",n),d=e(".novaworks-subscribe-form__message",n),u=window.novaworks_elementor_subscribe_form_ajax.sys_messages.invalid_mail||window.NovaworksElementConfigs.invalidMail,f=new s({handlerId:"novaworks_elementor_subscribe_form_ajax",successCallback:function(a){var s=a.type,i=a.message||"",r="novaworks-subscribe-form--response-"+s;l.removeClass("loading"),n.removeClass("novaworks-subscribe-form--response-error"),n.addClass(r),e("span",d).html(i),d.css({visibility:"visible"}),setTimeout((function(){d.css({visibility:"hidden"}),n.removeClass(r)}),2e4),o.redirect&&(window.location.href=o.redirect_url),e(window).trigger({type:"NovaworksElement/subscribe",elementId:t,successType:s,inputData:c})}});function m(){var a=r.val(),s={email:a,use_target_list_id:o.use_target_list_id||!1,target_list_id:o.target_list_id||"",data:c},t=i.serializeArray(),m={};window.NovaworksElementTools.validateEmail(a)?(e.each(t,(function(e,a){"email"===a.name?s[a.name]=a.value:m[a.name]=a.value})),s.additional=m,f.sendData(s),l.addClass("loading")):(r.addClass("mail-invalid"),n.addClass("novaworks-subscribe-form--response-error"),e("span",d).html(u),d.css({visibility:"visible"}),setTimeout((function(){n.removeClass("novaworks-subscribe-form--response-error"),d.css({visibility:"hidden"}),r.removeClass("mail-invalid")}),2e4))}r.on("focus",(function(){r.removeClass("mail-invalid")})),e(document).keydown((function(e){if(13===e.keyCode&&r.is(":focus"))return m(),!1})),l.on("click",(function(){return m(),!1}))}))}))}(jQuery,window.elementorFrontend);